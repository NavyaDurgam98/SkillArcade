<div class="user-rank-bar">
  <h2>Your Rank: {{ currentUserRank }}</h2>
  <p>You attempted: {{ attemptsMade }} quizzes</p>
</div>

<!-- Show leaderboard only when data is available -->
<div *ngIf="!isLoading && leaderboardData.length > 0">
  <div class="leaderboard-grid">
    <table>
      <thead>
        <tr>
          <th (click)="toggleSort('rank')">Rank</th>
          <th (click)="toggleSort('username')">User Name</th>
          <th (click)="toggleSort('total_score')">Total Score</th>
          <th (click)="toggleSort('quizzes_taken')">Quizzes Taken</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of leaderboardData; let i = index">
          <td>{{ user.rank }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.total_score }}</td>
          <td>{{ user.quizzes_taken }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Show loading message while data is being fetched -->
<ng-template #loading>
  <p>Loading leaderboard...</p>
</ng-template>

<!-- Error handling -->
<div *ngIf="leaderboardData.length === 0 && !isLoading">
  <p>Failed to load leaderboard data. Please try again later.</p>
</div>
